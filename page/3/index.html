<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Jacob Ludriks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Jacob Ludriks">
<meta property="og:url" content="http://jacob.ludriks.com/page/3/index.html">
<meta property="og:site_name" content="Jacob Ludriks">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jacob Ludriks">
  
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://jacob.ludriks.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer">
      <article id="post-Installing-LinuxDC-in-a-FreeNAS-jail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/21/Installing-LinuxDC-in-a-FreeNAS-jail/">Installing LinuxDC++ in a FreeNAS jail</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/01/21/Installing-LinuxDC-in-a-FreeNAS-jail/" class="article-date">
  <time datetime="2015-01-21T09:30:00.000Z" itemprop="datePublished">2015-01-21</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Set up SSH</strong></p>
<p>First, set up SSH by running the following in the tcsh session.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">echo &apos;sshd_enable=&quot;YES&quot;&apos; &gt;&gt; /etc/rc.conf</div><div class="line">echo &apos;ListenAddress 0.0.0.0&apos; &gt;&gt; /etc/ssh/sshd_config</div><div class="line">echo &apos;PermitRootLogin yes&apos; &gt;&gt; /etc/ssh/sshd_config</div><div class="line">echo &apos;PasswordAuthentication yes&apos; &gt;&gt; /etc/ssh/sshd_config</div></pre></td></tr></table></figure>
<p>Create a host RSA key with <code>ssh-keygen -t rsa</code> and entering <code>/etc/ssh/ssh_host_rsa_key</code> as the directory. Do not worry about a passphrase. After this is done, start the SSHd service with <code>service sshd start</code>.</p>
<p><strong>Note</strong>: This isn’t the most secure as you are logging in as root.</p>
<p>Reset the root password with <code>passwd</code>.</p>
<p><strong>Install packages and dependencies</strong></p>
<p>Install the latest <code>pkg</code> package with <code>pkg bootstrap -f</code>. After this has installed, upgrade with <code>pkg2ng</code>. Next, install the packages:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pkg install xorg openbox tightvnc linuxdcpp</div><div class="line">pkg install libiconv expat</div></pre></td></tr></table></figure>
<p>For some reason Pango needs to be reinstalled, so reinstall with:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pkg install -f pango</div></pre></td></tr></table></figure>
<p><strong>Set up VNC</strong></p>
<p>Create a directory for the <code>xstartup</code> script and then edit the file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir ~/.vnc</div><div class="line">edit ~/.vnc/xstartup</div></pre></td></tr></table></figure>
<p>Place the following in the <code>xstartup</code> script and save:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line">xrdb $HOME/.Xresources &amp;</div><div class="line">openbox &amp;</div><div class="line">xterm -bg black -fg gray &amp;</div></pre></td></tr></table></figure>
<p>Make the script executable:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x ~/.vnc/xstartup</div></pre></td></tr></table></figure>
<p><strong>Get rid of setup quirks</strong></p>
<p>There are certain things that <code>linuxdcpp</code> doesn’t like, so run the following commands:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gdk-pixbuf-query-loaders &gt; /usr/local/lib/gdk-pixbuf-2.0/2.10.0/loaders.cache</div><div class="line">mkdir -p /root/.local/share</div></pre></td></tr></table></figure>
<p><strong>Run VNC</strong></p>
<p>Run the following to start <code>VNC</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vncserver -depth 24 -geometry 1280x800 -nolisten tcp :1</div></pre></td></tr></table></figure>
<p>You will be asked to set a password - this is your VNC password for later.</p>
<p><strong>Setting up PuTTY</strong></p>
<p>Download <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank" rel="external">PuTTY</a> and run. Enter your host details.</p>
<img src="/2015/01/21/Installing-LinuxDC-in-a-FreeNAS-jail/host.png" alt="host.png" title="">
<p>Go to <code>Connection &gt; SSH &gt; Tunnels</code> and create a tunnel on port 5901 for VNC. Don’t forget to press “Add”</p>
<img src="/2015/01/21/Installing-LinuxDC-in-a-FreeNAS-jail/tunnel.png" alt="tunnel.png" title="">
<p>Press “Open” to connect. Enter <code>root</code> for the username and then type the password you specified earlier with <code>passwd</code>.</p>
<p>Now, download and install <a href="http://www.tightvnc.com/download.php" target="_blank" rel="external">TightVNC</a> and open the viewer. Connect to <code>localhost:5901</code>. Type the VNC password and press enter. You will now be connected to a remote desktop.</p>
<p>Open LinuxDC++ with <code>linuxdcpp</code>.</p>
<p>Done!</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dcpp/">dcpp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freenas/">freenas</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-SickRage-not-working-in-a-FreeNAS-jail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/18/SickRage-not-working-in-a-FreeNAS-jail/">SickRage not working in a FreeNAS jail</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/01/18/SickRage-not-working-in-a-FreeNAS-jail/" class="article-date">
  <time datetime="2015-01-17T23:05:00.000Z" itemprop="datePublished">2015-01-18</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>I ran in to an issue where SickRage wasn’t downloading torrents due to a Unicode decode failure. The error I was getting:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2015-01-17 14:57:12 WARNING  SEARCHQUEUE-MANUAL-272644 :: Failed to download result</div><div class="line">AA</div><div class="line">AAUnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 56-57: ordinal not in range(128)</div><div class="line">AA    with open(filename, &apos;wb&apos;) as fp:</div><div class="line">AA  File &quot;/usr/pbi/sickrage-amd64/share/sickrage/SickRage/sickbeard/helpers.py&quot;, line 1209, in download_file</div></pre></td></tr></table></figure>
<p>To fix this, I ssh’ed in to the jail and ran <code>edit /usr/local/etc/rc.d/sickrage</code>. After the line <code>load_rc_config ${name}</code>, I pasted the following lines:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">export LC_ALL=en_US.UTF-8</div><div class="line">export LANG=en_US.UTF-8</div><div class="line">export LANGUAGE=en_US.UTF-8</div></pre></td></tr></table></figure>
<p>After saving the file and restarting the <code>sickrage</code> service, everything worked again.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freenas/">freenas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sickrage/">sickrage</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Switching-to-FreeNAS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/15/Switching-to-FreeNAS/">Switching to FreeNAS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/01/15/Switching-to-FreeNAS/" class="article-date">
  <time datetime="2015-01-15T06:56:00.000Z" itemprop="datePublished">2015-01-15</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>I’ve been running a little short on storage space lately, so I decided to take the plunge and order a new storage system. Previously I was using a Synology DS413 with four 3TB Hitachi disks and I was hoping to get a Synology again for my new system, however once you want a Synology unit with more than four bays the price goes up quite significantly.</p>
<p>After a lot of research and reviewing of similar builds, I ended up with the following components.</p>
<h3 id="Component-List"><a href="#Component-List" class="headerlink" title="Component List"></a>Component List</h3><ul>
<li><p><strong>Case - Fractal Design Node 304</strong></p>
<p>  This case fits six drives, a Mini-ITX motherboard and a standard ATX power supply. Cable management is quite difficult however the entire case is less than 20L in size which is only marginally larger than my existing Synology unit.</p>
</li>
<li><p><strong>Motherboard - ASRock E3C224D2I</strong></p>
<p>  Unfortunately there isn’t much choice when it comes to server-grade Mini-ITX motherboards, however this one fits the specifications quite nicely. It has six SATA ports (2 x SATA2, 4 x SATA3), two ECC DDR3 slots, a BMC chip and two Intel GBe ports. The other option was an Atom Avoton C2550 motherboard however I wasn’t too keen on a non-upgradable CPU and using a Marvell storage controller over an Intel one.</p>
</li>
<li><p><strong>CPU - Intel Core i3-4160</strong></p>
<p>  Surprisingly, the Core i3 supports ECC RAM! I was originally going to get the Core i3-4150 however this model was on sale and ended up being cheaper.</p>
</li>
<li><p><strong>Memory - Kingston KVR13E9K2/16I</strong></p>
<p>  After reading lots of stories of incompatible memory, I decided to go with RAM sticks that somebody else had tested. </p>
</li>
<li><p><strong>Power Supply - Corsair CX600M Modular</strong></p>
<p>  80+ Bronze certified and six SATA power connectors. I would have rathered an 80+ Gold certified power supply but the price difference was too great.</p>
</li>
<li><p><strong>OS Disk - SanDisk Cruzer Fit 16GB</strong></p>
<p>  A nice and small USB key that can be installed directly on to the motherboard.</p>
</li>
<li><p><strong>Storage Disks - 6 x Western Digital Red 6TB WD60EFRX</strong></p>
<p>  Originally I was going to order Western Digital Green 6TB WDEZRX drives and run WDIDLE3 on them to fix the LCC issue, however I found that the two models were fairly close in price and the Reds have a longer warranty.</p>
</li>
<li><p><strong>OS - FreeNAS</strong></p>
<p>  For the OS, I chose FreeNAS after reading a lot about ZFS. The drives are configured in a RAID-Z2 configuration (similar to RAID6) which can tolerate two disk failures. This gives me 36TB of raw storage and 21.8TB of usable storage.</p>
</li>
</ul>
<img src="/2015/01/15/Switching-to-FreeNAS/IMG_20150115_173137.jpg" alt="IMG_20150115_173137.jpg" title="">
<img src="/2015/01/15/Switching-to-FreeNAS/IMG_20150115_173213.jpg" alt="IMG_20150115_173213.jpg" title="">
<img src="/2015/01/15/Switching-to-FreeNAS/IMG_20150115_173253.jpg" alt="IMG_20150115_173253.jpg" title="">
<img src="/2015/01/15/Switching-to-FreeNAS/IMG_20150115_173336.jpg" alt="IMG_20150115_173336.jpg" title="">
<img src="/2015/01/15/Switching-to-FreeNAS/IMG_20150115_173413.jpg" alt="IMG_20150115_173413.jpg" title="">
<h3 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h3><p>To test performance, I had two panes open in <code>tmux</code> and ran one command in each window:</p>
<ul>
<li>Pane 1: <code>iozone -a -s 24g -r 4096 -+w 1 -+y 1 -+C 1</code></li>
<li>Pane 2: <code>zpool iostat 1</code></li>
</ul>
<p>Watching the <code>zpool iostat</code> output whilst iozone was running, I saw that my maximum read speed was around 550-600 MB/s  and my maximum write speed was around 300-350 MB/s.</p>
<h3 id="Thoughts"><a href="#Thoughts" class="headerlink" title="Thoughts"></a>Thoughts</h3><p>The next upgrade will be 10gbit networking, however this is a long way off and not really needed at the moment. With a switch upgrade I will be able to use teaming but there is generally only one client accessing the server at once which negates this.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freenas/">freenas</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-vSphere-multipathing-report" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/01/13/vSphere-multipathing-report/">vSphere multipathing report</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2015/01/13/vSphere-multipathing-report/" class="article-date">
  <time datetime="2015-01-13T03:39:00.000Z" itemprop="datePublished">2015-01-13</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>The following script generates a report of all datastores and their multipathing policy. This was extremely useful when fixing up some datastores to use best practices with our 3PAR systems.</p>
<script src="https://gist.github.com/jacobludriks/02d2abf36f2670534e12.js"></script>

<p>Run with:</p>
<p><em>.\multipathing.ps1 -vCenter vcenter.domain.com -VMHost esxi.domain.com</em></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esxi/">esxi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powercli/">powercli</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/">powershell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vmware/">vmware</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Upgrading-HBA-Firmware-and-Drivers-on-HP-ESXi-Hosts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/27/Upgrading-HBA-Firmware-and-Drivers-on-HP-ESXi-Hosts/">Upgrading HBA Firmware and Drivers on HP ESXi Hosts</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/11/27/Upgrading-HBA-Firmware-and-Drivers-on-HP-ESXi-Hosts/" class="article-date">
  <time datetime="2014-11-27T11:37:00.000Z" itemprop="datePublished">2014-11-27</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>I’m guilty of only updating firmware and drivers on my devices when problems arise. I’m sure most of us do this. Bad practice! The guide in this post shows how to update a ProLiant system (blade, pedestal or rackmount) with the HP SPP and latest drivers.</p>
<p><strong>BEFORE YOU DO ANYTHING</strong>: Put the host in maintenance mode and move the virtual machines off! This probably doesn’t need to be said, but hey.</p>
<p><a href="http://vibsdepot.hp.com/" target="_blank" rel="external">HP VibsDepot</a> is a great resource for the currently supported firmware and driver recipe for ESXi as well as links to the required files. The most current support recipe document is located at <a href="http://vibsdepot.hp.com/hpq/recipes/HP-VMware-Recipe.pdf" target="_blank" rel="external">http://vibsdepot.hp.com/hpq/recipes/HP-VMware-Recipe.pdf</a> (pdf). First things first; you need to get the model of your HBA and which driver it uses. You can do this by connecting to the host with SSH.</p>
<p>If you don’t have SSH enabled, press F2 at the ESXi screen and login with the root credentials. Then, go down to <code>Troubleshooting Options</code> and select <code>Enable SSH</code>. You can then exit out of the menu by hitting the escape key a few times.</p>
<p>Open up your SSH client and connect to the host, then:</p>
<p><code># ls /proc/scsi</code></p>
<p>You will see possibly two or three devices. My HBA’s are Emulex branded, so mine shows as <code>lpfc820</code>.</p>
<p><code># cat /proc/scsi/lpfc820/1</code></p>
<p>I used tab complete after the final slash to get the HBA number put in automatically. The info received:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">Emulex OneConnect FCoE SCSI 8.2.1.90.28</div><div class="line">HP FlexFabric 10Gb 2-port 554FLB Adapter on PCI bus 0000:04 device 02 irq 184 Logical Link Speed: 4000 Mbps</div><div class="line">BoardNum: 0</div><div class="line">ESX Adapter: vmhba0</div><div class="line">Firmware Version: 4.1.450.16</div><div class="line">Portname: 50:06:0b:00:00:c2:62:10   Nodename: 50:06:0b:00:00:c2:62:11</div><div class="line">SLI Rev: 4</div><div class="line">    MQ: Enabled with 0x2 queues</div><div class="line">    NPIV Supported: VPIs max 255  VPIs used 0</div><div class="line">    RPIs max 1024  RPIs used 4   IOCBs inuse 0  IOCB max 8   txq cnt 0  txq max 0  txcmplq 0</div><div class="line">    Vport List:</div><div class="line">Link Up - Ready:</div><div class="line">    PortID 0x10e05</div><div class="line">    Fabric</div><div class="line">    Current speed 10G</div><div class="line">Port Discovered Nodes: Count 2</div><div class="line">t0000 DID 010c00 WWPN 50:01:43:80:02:5d:bb:e8 WWNN 50:01:43:80:02:5d:bb:e0 qdepth 8192 max 2 active 0 busy 0</div><div class="line">t0001 DID 010d00 WWPN 50:01:43:80:02:5d:bb:ec WWNN 50:01:43:80:02:5d:bb:e0 qdepth 8192 max 2 active 0 busy 0</div></pre></td></tr></table></figure>
<p>The most relevant information above is that the driver version currently installed is <code>8.2.1.90.28</code>, the firmware version is <code>4.1.450.16</code> and that the card is a <code>HP FlexFabric 10Gb 2-port 554FLB</code>. Within the recipe PDF linked to earlier, I can see that the most recent driver version is <code>8.2.4.141.55</code> and the most recent firmware version is <code>4.2.401.2215</code>, so I’m behind quite a few versions.</p>
<p>From the recipe PDF, click on the required driver link for your card, which will take you to the VMWare website. A zip file will be downloaded, and inside is another zip file with the word <strong>offline_bundle</strong> in its filename. This is the driver package we need. Set it aside for the next step. For the firmware, download the latest <a href="http://h18004.www1.hp.com/products/servers/service_packs/en/index.html" target="_blank" rel="external">Service Pack for ProLiant</a>. It’s a big ISO that includes firmware updates for all ProLiant servers and it works quite well. It’s normally updated every 3-4 months.</p>
<p>If you’re like me and have some old blades in your environment (like the BL460c G1) with iLO 2, you might find the virtual media function a bit flaky when you mount the SPP ISO. As a workaround, use the <a href="http://h20565.www2.hp.com/portal/site/hpsc/template.PAGE/public/psi/swdDetails/?javax.portlet.begCacheTok=com.vignette.cachetoken&amp;javax.portlet.endCacheTok=com.vignette.cachetoken&amp;javax.portlet.prp_bd9b6997fbc7fc515f4cf4626f5c8d01=wsrp-navigationalState%3Didx%3D%7CswItem%3DMTX_40e268a99cc243a299352b7b20%7CitemLocale%3D%7Cmode%3D%7Caction%3DdriverDocument&amp;javax.portlet.tpst=bd9b6997fbc7fc515f4cf4626f5c8d01&amp;ac.admitted=1374043405767.876444892.492883150" target="_blank" rel="external">HP USB Key Utility</a> (version 1.7!) to put the SPP on a USB drive and use a direct connection to the blade to boot. Don’t forget, the boot menu key is <strong>F11</strong>.</p>
<p>There is some excellent documentation available on the <a href="http://h18004.www1.hp.com/products/servers/service_packs/en/index.html" target="_blank" rel="external">HP SPP portal</a> for how to use the SPP. The latest version from when this post was written is <a href="http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c03673114/c03673114.pdf" target="_blank" rel="external">here</a>.</p>
<p>Use an SCP client (I use <a href="http://winscp.net/" target="_blank" rel="external">WinSCP</a>) to transfer the offline_bundle driver to a temporary directory on the host (I use <code>/var/log/vmware/</code>). Then, SSH in to the host and execute the following command:</p>
<p><code># esxcli software vib install --maintenance-mode --no-sig-check -d /var/log/vmware/name_of_offline_bundle.zip</code></p>
<p>Be aware that this can take quite a while, so don’t worry if there is still no output after 10 minutes. You should get an output similar to:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Installation Result</div><div class="line">    Message: The update completed successfully, but the system needs to be rebooted for the changes to be effective.</div><div class="line">    Reboot Required: true</div><div class="line">    VIBs Installed: Emulex_bootbank_scsi-lpfc820_8.2.4.151.65-1OEM.500.0.0.472560</div><div class="line">    VIBs Removed: Emulex_bootbank_scsi-lpfc820_8.2.4.141.55-1OEM.500.0.0.472560</div><div class="line">    VIBs Skipped:</div></pre></td></tr></table></figure>
<p>Issue a reboot to the system with <code>reboot</code>. Once it comes back up, take it out of maintenance mode. Done!</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firmware/">firmware</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hp/">hp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/patches/">patches</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Lost-Management-Interface-on-an-ESXi-Host" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/27/Lost-Management-Interface-on-an-ESXi-Host/">Lost Management Interface on an ESXi Host</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/11/27/Lost-Management-Interface-on-an-ESXi-Host/" class="article-date">
  <time datetime="2014-11-27T11:32:00.000Z" itemprop="datePublished">2014-11-27</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>A hosts management network interface somehow dropped off the network this afternoon. Fortunately I was still able to get in through iLO. It always pays to have an out-of-band interface active!</p>
<img src="/2014/11/27/Lost-Management-Interface-on-an-ESXi-Host/esxi-no-mgmt.png" alt="esxi-no-mgmt.png" title="">
<p>From the DCUI screen, press <code>Alt + F1</code>. This will bring up the login screen. Log in as root then type <code>esxcli network ip interface list</code>. You will get an output similar to the one below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">vmk2</div><div class="line">    Name: vmk2</div><div class="line">    MAC Address: 00:50:56:79:0c:de</div><div class="line">    Enabled: true</div><div class="line">    Portset: DvsPortset-0</div><div class="line">    Portgroup: N/A</div><div class="line">    VDS Name: dvSwitch-vMotion</div><div class="line">    VDS UUID: 0c 7d 1a 50 93 7b 86 3f-76 f8 74 80 73 7c 3d 0f</div><div class="line">    VDS Port: 101</div><div class="line">    VDS Connection: 1952632411</div><div class="line">    MTU: 1500</div><div class="line">    TSO MSS: 65535</div><div class="line">    Port ID: 33554436</div><div class="line"></div><div class="line">vmk0</div><div class="line">    Name: vmk0</div><div class="line">    MAC Address: 00:1c:c4:bd:d6:ee</div><div class="line">    Enabled: false</div><div class="line">    Portset: DvsPortset-2</div><div class="line">    Portgroup: N/A</div><div class="line">    VDS Name: dvSwitch</div><div class="line">    VDS UUID: 10 e1 1a 50 b1 22 19 a1-d4 33 10 dc 72 9a 92 db</div><div class="line">    VDS Port: 151</div><div class="line">    VDS Connection: 660732515</div><div class="line">    MTU: 1500</div><div class="line">    TSO MSS: 65535</div><div class="line">    Port ID: 67108871</div></pre></td></tr></table></figure>
<p>Fortunately mine was an easy issue to solve; vmk0 had <code>Enabled: false</code>. An easy fix: <code>esxcli network ip interface set -i vmk0 -e true</code></p>
<p>After this I was able to reconnect to the host from within vCenter.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esxi/">esxi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vmware/">vmware</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Meeting-Room-Utilization" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/27/Meeting-Room-Utilization/">Meeting Room Utilization</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/11/27/Meeting-Room-Utilization/" class="article-date">
  <time datetime="2014-11-27T11:30:00.000Z" itemprop="datePublished">2014-11-27</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>I had a request from a user to find out the meeting room utilization across our head office, but unfortunately I couldn’t find an easy way to do this with Exchange 2010 cmdlets. Here are some instructions to do so with COM objects, PowerShell and Excel.</p>
<p>First create a mailbox that will have the meeting room rights assigned to it, then grant the user access to the required mailboxes so that they show in Outlook:</p>
<p><code>Get-Mailbox meetingroomprefix* | Add-MailboxPermission -AccessRights FullAccess -User temporarymailbox</code></p>
<p>Open Outlook and add the meeting room mailboxes, then run the PowerShell script below with the appropriate date range. Mine shows the last financial year.</p>
<script src="https://gist.github.com/jacobludriks/8cdd5c2a74d70fd35b3b.js"></script>

<p>Next, open the CSV output file in Excel then:</p>
<ol>
<li>Create new sheet called Report</li>
<li>Insert a pivot table containing all the data from the raw data sheet</li>
<li>Drag “MeetingRoom” to Rows</li>
<li>Drag “Duration” to Values. Edit the field settings to be “Count” and rename to “Number of Meetings”</li>
<li>Drag “Duration” to Values. Edit the field settings to be “Sum” and rename to “Total Duration”</li>
<li>Create two new fields – one with the amount of work weeks per year (48.775 for mine) and the amount of hours per week (40 for mine).</li>
<li>Create a new table for utilization percentages. Put the formula as <code>=C5/($E$5*$E$9*60)</code>.</li>
</ol>
<img src="/2014/11/27/Meeting-Room-Utilization/meetingroom.png" alt="meetingroom.png" title="">
      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/exchange/">exchange</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/">powershell</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Change-SMTP-settings-on-Xerox-machines-with-PowerShell" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/27/Change-SMTP-settings-on-Xerox-machines-with-PowerShell/">Change SMTP settings on Xerox machines with PowerShell</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/11/27/Change-SMTP-settings-on-Xerox-machines-with-PowerShell/" class="article-date">
  <time datetime="2014-11-27T03:36:00.000Z" itemprop="datePublished">2014-11-27</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>I got really sick of changing SMTP settings on Xerox machines manually, so I made a PowerShell script to make it easier. The script can also pull a list of printers from a print server and work from that.</p>
<script src="https://gist.github.com/jacobludriks/4bcbcc9cba061f1e09a7.js"></script>

<p>Just change the variables up the top and run the script.</p>
<p>It could be further optimized with PowerShell workflows so it works on each concurrently, but I was lazy.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/">powershell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xerox/">xerox</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Adobe-FTP-is-slow" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/14/Adobe-FTP-is-slow/">Adobe FTP is slow!</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/08/14/Adobe-FTP-is-slow/" class="article-date">
  <time datetime="2014-08-14T04:41:00.000Z" itemprop="datePublished">2014-08-14</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Not sure if you have tried to download from adobe FTP site lately, however it is exceedingly slow (23kbps slow!). I have this afternoon, just worked out a small hack that makes it a lot faster… so far it seems to work (for the three adobe reader patches I’ve tried anyway).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1. Find the file on ftp://ftp.adobe.com/</div><div class="line">2. Copy the url of the file (including the exe, zip, etc) that you want to download.</div><div class="line">3. Replace the first part of the URL (ftp://ftp.adobe.com/) with http://ardownload.adobe.com/</div><div class="line">E.g. ftp://ftp.adobe.com/pub/adobe/reader/win/11.x/11.0.07/misc/AdbeRdrUpd11007_incr.msp becomes http://ardownload.adobe.com/pub/adobe/reader/win/11.x/11.0.07/misc/AdbeRdrUpd11007_incr.msp </div><div class="line">5. Enjoy the much faster download speeds!</div></pre></td></tr></table></figure>
      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/adobe/">adobe</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ftp/">ftp</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <article id="post-Citrix-error-number-2320" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/14/Citrix-error-number-2320/">Citrix error number 2320</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2014/08/14/Citrix-error-number-2320/" class="article-date">
  <time datetime="2014-08-14T04:38:00.000Z" itemprop="datePublished">2014-08-14</time>
</a>
      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>I found a weird error in Citrix the other day.</p>
<img src="/2014/08/14/Citrix-error-number-2320/citrix_online.png" alt="citrix_online.png" title="">
<p>The fix:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Citrix\ICA Client\Engine\Lockdown Profiles\All Regions</div><div class="line"></div><div class="line">Change the DWORD value for EnableLockdown from 1 to 0.</div><div class="line"></div><div class="line">Close Registry Editor and try to launch the application again.</div></pre></td></tr></table></figure>
      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/citrix/">citrix</a></li></ul>

      </footer>
    
  </div>
  
</article>


    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
      </nav>
    </section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Jacob Ludriks&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script src="/js/jquery.min.js"></script>



<script src="/js/script.js"></script>
  </div>
</body>
</html>